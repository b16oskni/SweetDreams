<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Sweet Dreams</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
        <style>
            /*div {border-style: solid; border-color: brown; border-width: 2px;}*/
            body {background-color: #375261;}
            #main {background-repeat: no-repeat; background-size: cover; padding: 0; }
            #family {bottom: 0px; left: 7vw; height: 300px; width: 300px;}
            #bob {bottom: 0px; left: 33vw; height: 470px; width: 560px;}
            #cleveland {bottom: 0px; right: 0px; height: 420px; width: 400px;}
            #selectMain {z-index:100;background-repeat: no-repeat; background-size: cover;}
        </style>
    </head>
    <body>
        <div id="main" class="container-fluid" style="height: 100vh;">
            <div id="selectMain" style="height: 100vh;">
                <div id="family" class="position-absolute"></div>
                <div id="bob" class="position-absolute"></div>
                <div id="cleveland" class="position-absolute"></div>
            </div>
        </div>
        <script>
            window.onload = function () {
                let selectFamily = document.getElementById('family');
                let selectBob = document.getElementById('bob');
                let selectCleveland = document.getElementById('cleveland');
                let selectBg = document.getElementById('selectMain');
                let seasons;
                let imdbFamily = 'tt0182576';
                let imdbBob = 'tt1561755';
                let imdbCleveland = 'tt1195935';

                document.getElementById('main').style.backgroundImage = "url('assets/showSelect.png')";

                //FAMILY GUY EVENTS
                selectFamily.addEventListener('mouseover', (event) => {
                    selectBg.style.backgroundImage = "url('assets/showSelectFamily.png')";
                });
                selectFamily.addEventListener('mouseleave', (event) => {
                    selectBg.style.backgroundImage = "";
                });
                selectFamily.addEventListener('click', (event) => {
                    fetch('https://imdb-api.com/en/API/Title/k_wcrrahm3/tt0182576')
                        .then((response) => response.json())
                        .then((data) => { if (data.tvSeriesInfo !== null) {
                            seasons = data.tvSeriesInfo.seasons;
                            console.log(seasons);
                        }});
                    randomiseEpisode(seasons, imdbFamily);
                });
                //BOBS BURGER EVENTS
                selectBob.addEventListener('mouseover', (event) => {
                    selectBg.style.backgroundImage = "url('assets/showSelectBob.png')";
                });
                selectBob.addEventListener('mouseleave', (event) => {
                    selectBg.style.backgroundImage = "";
                });
                selectBob.addEventListener('click', (event) => {
                    fetch('https://imdb-api.com/en/API/Title/k_wcrrahm3/tt1561755')
                        .then((response) => response.json())
                        .then((data) => { if (data.tvSeriesInfo !== null) {
                            seasons = data.tvSeriesInfo.seasons;
                            console.log(seasons);
                        }});
                    randomiseEpisode(seasons, imdbBob);
                });
                //CLEVELAND EVENTS
                selectCleveland.addEventListener('mouseover', (event) => {
                    selectBg.style.backgroundImage = "url('assets/showSelectCleveland.png')";
                });
                selectCleveland.addEventListener('mouseleave', (event) => {
                    selectBg.style.backgroundImage = "";
                });
                selectCleveland.addEventListener('click', (event) => {
                    fetch('https://imdb-api.com/en/API/Title/k_wcrrahm3/tt1195935')
                        .then((response) => response.json())
                        .then((data) => { if (data.tvSeriesInfo !== null) {
                            seasons = data.tvSeriesInfo.seasons;
                            console.log(seasons);
                        }});
                    randomiseEpisode(seasons, imdbCleveland);
                });
            }
            function randomiseEpisode(seasons, imdbKey) {
                //randomise season then fetch number of episodes through api
                //then randomise episode number and render season number, episode number, title, image and plot
            }
        </script>
    </body>
</html>